setopt autocd nomatch
zstyle :compinstall filename '${DOTFILES}/.zshrc'

autoload -Uz compinit
compinit -d ${DOTFILES}/.cache/zsh/zcompdump-${ZSH_VERSION}

# set plugins
plugins=(
	git
	zsh-autosuggestions
	zsh-syntax-highlighting
)

# git integration
autoload -Uz vcs_info
setopt prompt_subst
precmd_vcs_info() { vcs_info }
precmd_functions+=( precmd_vcs_info )

# ZSH Correct typos
#setopt correct

# Set PS1
autoload -U colors && colors
# Set Colors
(cat ~/.cache/wal/sequences &)
source ~/.cache/wal/colors-tty.sh
PROMPT="%B%F{red}%n%b %F{cyan}%~ ▶ %F{white}"
RPROMPT="\$vcs_info_msg_0_"
# Replace Git placeholders with actual information
zstyle ':vcs_info:git:*' formats '%F{yellow}[ %F{cyan}%b %F{yellow}] %f'
zstyle ':vcs_info:*' enable git

# Keymap settings
bindkey -v	# Use VIM style
bindkey "^[[3~" delete-char   # bind delete key to delete a character
bindkey "^[3;5~" delete-char

# Aliases
alias szsh="source ${HOME}/.zshrc"
alias sudo="sudo "
alias v="vim"
alias la="ls -lA --color=auto"
alias ll="ls -l --color=auto"
alias ls="ls --color=auto"
alias diff="diff --color=auto"
alias grep="grep --color=auto"
alias feh-svg="feh --conversion-timeout 1"
alias cp="cp -i"
# NetworkManager
alias con="nmcli con"
alias down="nmcli con down"
alias up="nmcli con up"
# git related aliases
alias addall="git add ."
alias checkout="git checkout"
alias commit="git commit"
alias fetch="git fetch"
alias pull="git pull"
alias push="git push"
alias status="git status"
alias tag="git tag"

# Other "aliases" (functions)

# Git add, commit and push all files in current directory
compush() {   
	if [ -n "$1" ]
       	then
		git add . && git commit -m "$1" && git push
	else
		echo "Error: Cannot push without a commit message."
	fi
}

# Git add all files in current directory and commit
comall() {    
	if [ -n "$1" ]
       	then
		git add . && git commit -m "$1"
	else
		echo "Error: Cannot push without a commit message."
	fi
}

# Change wallpaper and colour schemes/backgrounds based on it
chbg() {
	if [[ -f $1 ]]
       	then
		feh --bg-scale $1 && python -m pywal -n -i $1 -o $DOTFILES/wal/update-configs
	else
		echo "Error: Cannot change background without a picture."
	fi
}

# ZSH Syntax Highlighting source
source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

