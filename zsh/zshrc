# Lines configured by zsh-newuser-install
#HISTFILE=${DOTFILES}/zsh/histfile
#HISTSIZE=1000
#SAVEHIST=1000
setopt autocd nomatch
# End of lines configured by zsh-newuser-install
# The following lines were added by compinstall
zstyle :compinstall filename '${DOTFILES}/.zshrc'

autoload -Uz compinit
compinit -d ${DOTFILES}/.cache/zsh/zcompdump-${ZSH_VERSION}
# End of lines added by compinstall

# set plugins
plugins=(
	git
	zsh-autosuggestions
	zsh-syntax-highlighting
)

# git integration
autoload -Uz vcs_info
setopt prompt_subst
precmd_vcs_info() { vcs_info }
precmd_functions+=( precmd_vcs_info )

# ZSH Correct typos
setopt correct

# Set PS1
autoload -U colors && colors
# Set Colors
(cat ~/.cache/wal/sequences &)
source ~/.cache/wal/colors-tty.sh
PROMPT="%B%F{red}%n%b %F{cyan}%~ \$vcs_info_msg_0_%F{magenta}▶ %F{white}"
zstyle ':vcs_info:git:*' formats '%f( %b) '
#zstyle ':vcs_info:git:*' formats '%F{yellow}%f%K{yellow}%F{pink} %b%k%f'
zstyle ':vcs_info:*' enable git

# Keymap settings
bindkey -v	# Use VIM style
bindkey "^[[3~" delete-char
bindkey "^[3;5~" delete-char

# Aliases
alias szsh="source ${HOME}/.zshrc"
alias ls="ls --color=auto"
alias diff="diff --color=auto"
alias grep="grep --color=auto"
alias gitps="git push"

# Other "aliases" (functions)
# Git add, commit and push all files in current directory
gitcp() {   
	if [ -n "$1" ]
       	then
		git add . && git commit -m "$1" && git push
	else
		echo "Error: Cannot push without a commit message."
	fi
}

# Git add all files in current directory and commit
gitc() {    
	if [ -n "$1" ]
       	then
		git add . && git commit -m "$1"
	else
		echo "Error: Cannot push without a commit message."
	fi
}

# Change wallpaper and colour schemes/backgrounds based on it
chbg() {
	if [[ -f $1 ]]
       	then
		feh --bg-scale $1 && python -m pywal  -i $1
	else
		echo "Error: Cannot change background without a picture."
	fi
}

# ZSH Syntax Highlighting source
source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

